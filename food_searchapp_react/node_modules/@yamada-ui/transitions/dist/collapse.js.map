{"version":3,"sources":["../src/collapse.tsx"],"sourcesContent":["import type { CSSUIObject } from \"@yamada-ui/core\"\nimport { forwardRef } from \"@yamada-ui/core\"\nimport type {\n  WithTransitionProps,\n  MotionTransitionVariants,\n  MotionProps,\n} from \"@yamada-ui/motion\"\nimport {\n  AnimatePresence,\n  transitionEnter,\n  transitionExit,\n  MOTION_TRANSITION_EASINGS,\n  Motion,\n} from \"@yamada-ui/motion\"\nimport { createdDom, cx } from \"@yamada-ui/utils\"\nimport { useEffect, useState } from \"react\"\n\nconst isNumeric = (value?: string | number) =>\n  value != null && parseFloat(value.toString()) > 0\n\ntype CollapseOptions = {\n  /**\n   * If `true`, the opacity of the content will be animated.\n   *\n   * @default true\n   */\n  animationOpacity?: boolean\n  /**\n   * The height you want the content in its collapsed state.\n   *\n   * @default 0\n   */\n  startingHeight?: number | string\n  /**\n   * The height you want the content in its expanded state.\n   *\n   * @default \"auto\"\n   */\n  endingHeight?: number | string\n}\n\nexport type CollapseProps = WithTransitionProps<MotionProps> & CollapseOptions\n\nconst variants: MotionTransitionVariants = {\n  enter: ({\n    animationOpacity,\n    endingHeight: height,\n    transition,\n    transitionEnd,\n    delay,\n    duration,\n    enter,\n  } = {}) => ({\n    ...(animationOpacity ? { opacity: 1 } : {}),\n    height,\n    transition: transitionEnter(transition?.enter)(delay, duration),\n    transitionEnd: transitionEnd?.enter,\n    ...enter,\n  }),\n  exit: ({\n    animationOpacity,\n    startingHeight: height,\n    transition,\n    transitionEnd,\n    delay,\n    duration,\n    exit,\n  } = {}) => ({\n    ...(animationOpacity ? { opacity: isNumeric(height) ? 1 : 0 } : {}),\n    height,\n    transition: transitionExit(transition?.exit)(delay, duration),\n    transitionEnd: transitionEnd?.exit,\n    ...exit,\n  }),\n}\n\nexport const collapseProps = {\n  initial: \"exit\",\n  animate: \"enter\",\n  exit: \"exit\",\n  variants,\n}\n\n/**\n * `Collapse` is a component that allows you to expand or collapse an element for display.\n *\n * @see Docs https://yamada-ui.com/components/transitions/collapse\n */\nexport const Collapse = forwardRef<CollapseProps, \"div\", false>(\n  (\n    {\n      unmountOnExit,\n      isOpen,\n      animationOpacity = true,\n      startingHeight = 0,\n      endingHeight = \"auto\",\n      transition,\n      transitionEnd,\n      delay,\n      duration,\n      className,\n      style,\n      __css,\n      ...rest\n    },\n    ref,\n  ) => {\n    const [mounted, setMounted] = useState(false)\n\n    useEffect(() => {\n      const isBrowser = createdDom()\n\n      if (isBrowser) setMounted(true)\n    }, [])\n\n    const hasStartingHeight = parseFloat(startingHeight.toString()) > 0\n    const animate = isOpen || unmountOnExit ? \"enter\" : \"exit\"\n\n    isOpen = unmountOnExit ? isOpen : true\n    transition = !mounted\n      ? { enter: { duration: 0 } }\n      : transition ?? {\n          enter: {\n            height: {\n              duration: duration ?? 0.3,\n              ease: MOTION_TRANSITION_EASINGS.ease,\n            },\n            opacity: {\n              duration: duration ?? 0.4,\n              ease: MOTION_TRANSITION_EASINGS.ease,\n            },\n          },\n          exit: {\n            height: {\n              duration: duration ?? 0.3,\n              ease: MOTION_TRANSITION_EASINGS.ease,\n            },\n            opacity: {\n              duration: duration ?? 0.4,\n              ease: MOTION_TRANSITION_EASINGS.ease,\n            },\n          },\n        }\n    transitionEnd = unmountOnExit\n      ? transitionEnd\n      : {\n          ...transitionEnd,\n          exit: {\n            ...transitionEnd?.exit,\n            display: hasStartingHeight ? \"block\" : \"none\",\n          },\n        }\n\n    const custom = {\n      animationOpacity,\n      startingHeight,\n      endingHeight,\n      transition,\n      transitionEnd,\n      delay,\n      duration,\n    }\n\n    const css: CSSUIObject = {\n      w: \"100%\",\n      ...__css,\n    }\n\n    return (\n      <AnimatePresence initial={false} custom={custom}>\n        {isOpen ? (\n          <Motion\n            ref={ref}\n            className={cx(\"ui-collapse\", className)}\n            {...rest}\n            {...collapseProps}\n            custom={custom}\n            animate={animate}\n            initial={unmountOnExit ? \"exit\" : false}\n            __css={css}\n            style={{\n              overflow: \"hidden\",\n              display: \"block\",\n              ...style,\n            }}\n          />\n        ) : null}\n      </AnimatePresence>\n    )\n  },\n)\n"],"mappings":"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","names":[]}