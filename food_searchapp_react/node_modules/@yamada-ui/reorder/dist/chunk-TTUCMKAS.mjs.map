{"version":3,"sources":["../src/reorder-item.tsx"],"sourcesContent":["import type { HTMLUIProps, CSSUIObject } from \"@yamada-ui/core\"\nimport { ui } from \"@yamada-ui/core\"\nimport type { HTMLMotionProps, DragControls } from \"@yamada-ui/motion\"\nimport {\n  MotionReorder,\n  useMotionValue,\n  useDragControls,\n} from \"@yamada-ui/motion\"\nimport { createContext, cx, dataAttr } from \"@yamada-ui/utils\"\nimport { forwardRef, useCallback, useEffect, useState } from \"react\"\nimport { useReorderContext } from \"./reorder\"\n\ntype ReorderItemContext = {\n  register: (node: HTMLElement | null) => void\n  isDrag: boolean\n  dragControls: DragControls\n}\n\nexport const [ReorderItemProvider, useReorderItemContext] =\n  createContext<ReorderItemContext>({\n    name: \"ReorderContext\",\n    errorMessage: `useReorderItemContext returned is 'undefined'. Seems you forgot to wrap the components in \"<ReorderItem />\"`,\n  })\n\ntype ReorderItemOptions = {\n  /**\n   * The label of the reorder item.\n   */\n  label: string | number\n}\n\nexport type ReorderItemProps = Omit<HTMLUIProps<\"li\">, \"as\"> &\n  Omit<HTMLMotionProps<\"li\">, \"as\" | \"layout\"> &\n  ReorderItemOptions\n\nexport const ReorderItem = forwardRef<HTMLLIElement, ReorderItemProps>(\n  ({ className, label, ...rest }, ref) => {\n    const { orientation, styles } = useReorderContext()\n\n    const dragControls = useDragControls()\n\n    const [hasTrigger, setHasTrigger] = useState<boolean>(false)\n    const [isDrag, setIsDrag] = useState<boolean>(false)\n\n    const x = useMotionValue(0)\n    const y = useMotionValue(0)\n\n    const register = useCallback(\n      (node: HTMLElement | null) => setHasTrigger(!!node),\n      [],\n    )\n\n    useEffect(() => {\n      const unsubscribeX = x.on(\"change\", (x) => {\n        if (orientation === \"horizontal\") setIsDrag(x !== 0)\n      })\n      const unsubscribeY = y.on(\"change\", (y) => {\n        if (orientation === \"vertical\") setIsDrag(y !== 0)\n      })\n\n      return () => {\n        unsubscribeX()\n        unsubscribeY()\n      }\n    }, [orientation, x, y])\n\n    const css: CSSUIObject = {\n      ...(!hasTrigger ? { cursor: \"grab\" } : { userSelect: \"none\" }),\n      ...styles.item,\n      ...(!hasTrigger\n        ? {\n            _selected: {\n              ...(styles.item as any)?._selected,\n              cursor: \"grabbing\",\n            },\n          }\n        : {}),\n    }\n\n    return (\n      <ReorderItemProvider value={{ register, isDrag, dragControls }}>\n        <ui.li\n          ref={ref}\n          as={MotionReorder.Item}\n          className={cx(\"ui-reorder__item\", className)}\n          value={label}\n          __css={css}\n          {...rest}\n          // @ts-ignore\n          dragListener={!hasTrigger}\n          dragControls={dragControls}\n          data-selected={dataAttr(isDrag)}\n          style={{ ...rest.style, x, y }}\n        />\n      </ReorderItemProvider>\n    )\n  },\n)\n\nReorderItem.displayName = \"ReorderItem\"\n"],"mappings":";;;;;;AACA,SAAS,UAAU;AAEnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,SAAS,eAAe,IAAI,gBAAgB;AAC5C,SAAS,YAAY,aAAa,WAAW,gBAAgB;AAwErD;AA/DD,IAAM,CAAC,qBAAqB,qBAAqB,IACtD,cAAkC;AAAA,EAChC,MAAM;AAAA,EACN,cAAc;AAChB,CAAC;AAaI,IAAM,cAAc;AAAA,EACzB,CAAC,EAAE,WAAW,OAAO,GAAG,KAAK,GAAG,QAAQ;AApC1C;AAqCI,UAAM,EAAE,aAAa,OAAO,IAAI,kBAAkB;AAElD,UAAM,eAAe,gBAAgB;AAErC,UAAM,CAAC,YAAY,aAAa,IAAI,SAAkB,KAAK;AAC3D,UAAM,CAAC,QAAQ,SAAS,IAAI,SAAkB,KAAK;AAEnD,UAAM,IAAI,eAAe,CAAC;AAC1B,UAAM,IAAI,eAAe,CAAC;AAE1B,UAAM,WAAW;AAAA,MACf,CAAC,SAA6B,cAAc,CAAC,CAAC,IAAI;AAAA,MAClD,CAAC;AAAA,IACH;AAEA,cAAU,MAAM;AACd,YAAM,eAAe,EAAE,GAAG,UAAU,CAACA,OAAM;AACzC,YAAI,gBAAgB;AAAc,oBAAUA,OAAM,CAAC;AAAA,MACrD,CAAC;AACD,YAAM,eAAe,EAAE,GAAG,UAAU,CAACC,OAAM;AACzC,YAAI,gBAAgB;AAAY,oBAAUA,OAAM,CAAC;AAAA,MACnD,CAAC;AAED,aAAO,MAAM;AACX,qBAAa;AACb,qBAAa;AAAA,MACf;AAAA,IACF,GAAG,CAAC,aAAa,GAAG,CAAC,CAAC;AAEtB,UAAM,MAAmB;AAAA,MACvB,GAAI,CAAC,aAAa,EAAE,QAAQ,OAAO,IAAI,EAAE,YAAY,OAAO;AAAA,MAC5D,GAAG,OAAO;AAAA,MACV,GAAI,CAAC,aACD;AAAA,QACE,WAAW;AAAA,UACT,IAAI,YAAO,SAAP,mBAAqB;AAAA,UACzB,QAAQ;AAAA,QACV;AAAA,MACF,IACA,CAAC;AAAA,IACP;AAEA,WACE,oBAAC,uBAAoB,OAAO,EAAE,UAAU,QAAQ,aAAa,GAC3D;AAAA,MAAC,GAAG;AAAA,MAAH;AAAA,QACC;AAAA,QACA,IAAI,cAAc;AAAA,QAClB,WAAW,GAAG,oBAAoB,SAAS;AAAA,QAC3C,OAAO;AAAA,QACP,OAAO;AAAA,QACN,GAAG;AAAA,QAEJ,cAAc,CAAC;AAAA,QACf;AAAA,QACA,iBAAe,SAAS,MAAM;AAAA,QAC9B,OAAO,EAAE,GAAG,KAAK,OAAO,GAAG,EAAE;AAAA;AAAA,IAC/B,GACF;AAAA,EAEJ;AACF;AAEA,YAAY,cAAc;","names":["x","y"]}