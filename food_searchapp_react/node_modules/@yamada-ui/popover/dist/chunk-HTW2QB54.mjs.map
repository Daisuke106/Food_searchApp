{"version":3,"sources":["../src/popover-content.tsx"],"sourcesContent":["import type { CSSUIObject, CSSUIProps } from \"@yamada-ui/core\"\nimport { ui, forwardRef } from \"@yamada-ui/core\"\nimport type { MotionProps } from \"@yamada-ui/motion\"\nimport { motion } from \"@yamada-ui/motion\"\nimport { scaleFadeProps, slideFadeProps } from \"@yamada-ui/transitions\"\nimport type { DOMAttributes } from \"@yamada-ui/utils\"\nimport { cx, findChildren, funcAll, getValidChildren } from \"@yamada-ui/utils\"\nimport type { ReactNode, RefAttributes } from \"react\"\nimport { usePopover } from \"./popover\"\nimport type { PopoverProps } from \".\"\nimport { PopoverCloseButton } from \".\"\n\nexport type PopoverContentProps = MotionProps<\"section\">\n\nconst getPopoverContentProps = (\n  animation: PopoverProps[\"animation\"] = \"scale\",\n  duration?: PopoverProps[\"duration\"],\n) => {\n  const custom = {\n    reverse: true,\n    duration,\n    enter: { visibility: \"visible\" },\n    transitionEnd: { exit: { visibility: \"hidden\" } },\n  }\n\n  switch (animation) {\n    case \"scale\":\n      return {\n        ...scaleFadeProps,\n        custom: { ...custom, scale: 0.95 },\n      }\n    case \"top\":\n      return {\n        ...slideFadeProps,\n        custom: { ...custom, offsetX: 0, offsetY: -16 },\n      }\n    case \"right\":\n      return {\n        ...slideFadeProps,\n        custom: { ...custom, offsetX: 16, offsetY: 0 },\n      }\n    case \"left\":\n      return {\n        ...slideFadeProps,\n        custom: { ...custom, offsetX: -16, offsetY: 0 },\n      }\n    case \"bottom\":\n      return {\n        ...slideFadeProps,\n        custom: { ...custom, offsetX: 0, offsetY: 16 },\n      }\n  }\n}\n\nexport const PopoverContent = forwardRef<PopoverContentProps, \"section\">(\n  (\n    {\n      as = \"section\",\n      className,\n      children,\n      w,\n      width,\n      minW,\n      minWidth,\n      z: zProp,\n      zIndex: zIndexProp,\n      __css: __cssProp,\n      ...rest\n    },\n    ref,\n  ) => {\n    const {\n      isOpen,\n      closeOnButton,\n      getPopperProps,\n      getPopoverProps,\n      onAnimationComplete,\n      animation,\n      duration,\n      styles,\n    } = usePopover()\n\n    const validChildren = getValidChildren(children)\n    const [customPopoverCloseButton, ...cloneChildren] = findChildren(\n      validChildren,\n      PopoverCloseButton,\n    )\n\n    const resolvedChildren = (): ReactNode => {\n      return (\n        <>\n          {customPopoverCloseButton ??\n            (closeOnButton ? <PopoverCloseButton /> : null)}\n\n          {cloneChildren}\n        </>\n      )\n    }\n\n    const { z, zIndex, ...__css } = __cssProp ?? styles.container ?? {}\n    const css: CSSUIObject = {\n      position: \"relative\",\n      w: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      outline: 0,\n      ...__css,\n    }\n\n    w =\n      w ??\n      width ??\n      ((styles.container?.w ?? styles.container?.width) as CSSUIProps[\"w\"])\n    minW =\n      minW ??\n      minWidth ??\n      ((styles.container?.minW ??\n        styles.container?.minWidth) as CSSUIProps[\"minW\"])\n\n    const resolvedZIndex = (zIndexProp ??\n      zProp ??\n      zIndex ??\n      z) as CSSUIProps[\"zIndex\"]\n\n    return (\n      <ui.div\n        {...getPopperProps({\n          style: { visibility: isOpen ? \"visible\" : \"hidden\" },\n        })}\n        className=\"ui-popover\"\n        w={w}\n        minW={minW}\n        zIndex={resolvedZIndex}\n      >\n        <ui.section\n          as={motion[as as keyof typeof motion]}\n          className={cx(\"ui-popover__content\", className)}\n          {...(animation !== \"none\"\n            ? getPopoverContentProps(animation, duration)\n            : {})}\n          {...(getPopoverProps(\n            {\n              ...rest,\n              children: resolvedChildren(),\n            },\n            ref,\n          ) as Omit<DOMAttributes & RefAttributes<any>, \"onDrag\">)}\n          initial=\"exit\"\n          animate={isOpen ? \"enter\" : \"exit\"}\n          exit=\"exit\"\n          onAnimationComplete={funcAll(\n            onAnimationComplete,\n            rest.onAnimationComplete,\n          )}\n          __css={css}\n        />\n      </ui.div>\n    )\n  },\n)\n"],"mappings":"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","names":[]}