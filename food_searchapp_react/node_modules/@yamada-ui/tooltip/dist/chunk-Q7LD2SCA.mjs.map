{"version":3,"sources":["../src/tooltip.tsx"],"sourcesContent":["import type {\n  CSSUIObject,\n  CSSUIProps,\n  HTMLUIProps,\n  ThemeProps,\n} from \"@yamada-ui/core\"\nimport {\n  ui,\n  forwardRef,\n  omitThemeProps,\n  useComponentStyle,\n} from \"@yamada-ui/core\"\nimport type {\n  HTMLMotionProps,\n  MotionTransitionProperties,\n} from \"@yamada-ui/motion\"\nimport { motion, AnimatePresence } from \"@yamada-ui/motion\"\nimport type { PortalProps } from \"@yamada-ui/portal\"\nimport { Portal } from \"@yamada-ui/portal\"\nimport { scaleFadeProps, slideFadeProps } from \"@yamada-ui/transitions\"\nimport { useDisclosure } from \"@yamada-ui/use-disclosure\"\nimport { useEventListener } from \"@yamada-ui/use-event-listener\"\nimport { useOutsideClick } from \"@yamada-ui/use-outside-click\"\nimport type { UsePopperProps } from \"@yamada-ui/use-popper\"\nimport { usePopper } from \"@yamada-ui/use-popper\"\nimport type { PropGetter } from \"@yamada-ui/utils\"\nimport {\n  cx,\n  handlerAll,\n  mergeRefs,\n  getOwnerWindow,\n  getOwnerDocument,\n} from \"@yamada-ui/utils\"\nimport type { ReactNode } from \"react\"\nimport { Children, cloneElement, useCallback, useEffect, useRef } from \"react\"\n\ntype TooltipOptions = {\n  /**\n   * The label of the tooltip.\n   */\n  label?: ReactNode\n  /**\n   * If `true`, the tooltip will be shown.\n   */\n  isOpen?: boolean\n  /**\n   * If `true`, the tooltip will be initially shown.\n   */\n  defaultIsOpen?: boolean\n  /**\n   * Callback to run when the tooltip shows.\n   */\n  onOpen?: () => void\n  /**\n   * Callback to run when the tooltip hides.\n   */\n  onClose?: () => void\n  /**\n   * If `true`, the tooltip will be disabled.\n   *\n   * @default false\n   */\n  isDisabled?: boolean\n  /**\n   * The delay before showing the tooltip.\n   *\n   * @default 0\n   */\n  openDelay?: number\n  /**\n   * The delay before hiding the tooltip.\n   *\n   * @default 0\n   */\n  closeDelay?: number\n  /**\n   * If `true`, the tooltip will hide on click.\n   *\n   * @default false\n   */\n  closeOnClick?: boolean\n  /**\n   * If `true`, the tooltip will hide on scroll.\n   *\n   * @default false\n   */\n  closeOnScroll?: boolean\n  /**\n   * If `true`, the tooltip will hide while the mouse is down.\n   *\n   * @default false\n   */\n  closeOnMouseDown?: boolean\n  /**\n   * If `true`, the tooltip will hide while the pointer is down.\n   *\n   * @default false\n   */\n  closeOnPointerDown?: boolean\n  /**\n   * If `true`, the tooltip will hide on pressing Esc key.\n   *\n   * @default true\n   */\n  closeOnEsc?: boolean\n  /**\n   * The animation of the tooltip.\n   *\n   * @default 'scale'\n   */\n  animation?: \"scale\" | \"top\" | \"right\" | \"left\" | \"bottom\" | \"none\"\n  /**\n   * The animation duration.\n   */\n  duration?: MotionTransitionProperties[\"duration\"]\n  /**\n   * Props for portal component.\n   */\n  portalProps?: Pick<PortalProps, \"appendToParentPortal\" | \"containerRef\">\n  /**\n   * If `true`, the element will be transported to the end of document.body.\n   */\n  withPortal?: boolean\n}\n\nexport type TooltipProps = Omit<HTMLUIProps<\"div\">, \"offset\"> &\n  ThemeProps<\"Tooltip\"> &\n  Omit<HTMLMotionProps<\"div\">, \"color\" | \"style\" | \"variants\" | \"transition\"> &\n  Pick<UsePopperProps, \"modifiers\" | \"gutter\" | \"offset\" | \"placement\"> &\n  TooltipOptions\n\nconst getTooltipProps = (\n  animation: TooltipProps[\"animation\"] = \"scale\",\n  duration?: TooltipProps[\"duration\"],\n) => {\n  const custom = {\n    reverse: true,\n    duration,\n    enter: { visibility: \"visible\" },\n    transitionEnd: { exit: { visibility: \"hidden\" } },\n  }\n\n  switch (animation) {\n    case \"scale\":\n      return {\n        ...scaleFadeProps,\n        custom: { ...custom, scale: 0.95 },\n      }\n    case \"top\":\n      return {\n        ...slideFadeProps,\n        custom: { ...custom, offsetY: -16 },\n      }\n    case \"right\":\n      return {\n        ...slideFadeProps,\n        custom: { ...custom, offsetX: 16 },\n      }\n    case \"left\":\n      return {\n        ...slideFadeProps,\n        custom: { ...custom, offsetX: -16 },\n      }\n    case \"bottom\":\n      return {\n        ...slideFadeProps,\n        custom: { ...custom, offsetY: 16 },\n      }\n  }\n}\n\n/**\n * `Tooltip` is a component that displays short information, such as supplementary details for an element.\n *\n * @see Docs https://yamada-ui.com/components/overlay/tooltip\n */\nexport const Tooltip = forwardRef<TooltipProps, \"div\">(\n  (\n    {\n      closeOnPointerDown,\n      z: zProp,\n      zIndex: zIndexProp,\n      portalProps,\n      withPortal = true,\n      ...props\n    },\n    ref,\n  ) => {\n    let [{ z, zIndex, ...styles }, mergedProps] = useComponentStyle(\n      \"Tooltip\",\n      props,\n    )\n    const {\n      className,\n      children,\n      label,\n      placement,\n      modifiers,\n      gutter,\n      offset,\n      openDelay = 0,\n      closeDelay = 0,\n      isDisabled,\n      closeOnClick,\n      closeOnScroll,\n      closeOnMouseDown,\n      closeOnEsc = true,\n      animation,\n      duration,\n      isOpen: isOpenProp,\n      defaultIsOpen: defaultIsOpenProp,\n      onOpen: onOpenProp,\n      onClose: onCloseProp,\n      ...rest\n    } = omitThemeProps(mergedProps)\n\n    closeOnPointerDown = closeOnMouseDown\n\n    const { isOpen, onOpen, onClose } = useDisclosure({\n      isOpen: isOpenProp,\n      defaultIsOpen: defaultIsOpenProp,\n      onOpen: onOpenProp,\n      onClose: onCloseProp,\n    })\n\n    const triggerRef = useRef<HTMLElement>(null)\n\n    const openTimeout = useRef<number>()\n    const closeTimeout = useRef<number>()\n\n    const { referenceRef, getPopperProps, transformOrigin } = usePopper({\n      enabled: isOpen,\n      placement,\n      modifiers,\n      gutter,\n      offset,\n    })\n\n    const closeNow = useCallback(() => {\n      if (closeTimeout.current) {\n        clearTimeout(closeTimeout.current)\n\n        closeTimeout.current = undefined\n      }\n\n      onClose()\n    }, [onClose])\n\n    const openWithDelay = useCallback(() => {\n      if (!isDisabled && !openTimeout.current) {\n        if (isOpen) closeNow()\n\n        const win = getOwnerWindow(triggerRef.current)\n\n        openTimeout.current = win.setTimeout(onOpen, openDelay)\n      }\n    }, [isDisabled, isOpen, openDelay, closeNow, onOpen])\n\n    const closeWithDelay = useCallback(() => {\n      if (openTimeout.current) {\n        clearTimeout(openTimeout.current)\n\n        openTimeout.current = undefined\n      }\n\n      const win = getOwnerWindow(triggerRef.current)\n\n      closeTimeout.current = win.setTimeout(closeNow, closeDelay)\n    }, [closeDelay, closeNow])\n\n    const onClick = useCallback(\n      () => (isOpen && closeOnClick ? closeWithDelay() : undefined),\n      [isOpen, closeOnClick, closeWithDelay],\n    )\n\n    const onPointerDown = useCallback(\n      () => (isOpen && closeOnPointerDown ? closeWithDelay() : undefined),\n      [isOpen, closeOnPointerDown, closeWithDelay],\n    )\n\n    const onKeyDown = useCallback(\n      (ev: KeyboardEvent) =>\n        isOpen && ev.key === \"Escape\" ? closeWithDelay() : undefined,\n      [isOpen, closeWithDelay],\n    )\n\n    useEventListener(\n      () => getOwnerDocument(triggerRef.current),\n      \"keydown\",\n      (ev) => (closeOnEsc ? onKeyDown(ev) : undefined),\n    )\n\n    useEventListener(\n      () => getOwnerDocument(triggerRef.current),\n      \"scroll\",\n      () => (isOpen && closeOnScroll ? closeNow() : undefined),\n    )\n\n    useEventListener(\n      () => triggerRef.current,\n      \"pointerleave\",\n      (e) => {\n        if (e.pointerType !== \"touch\") closeWithDelay()\n      },\n    )\n\n    useEventListener(\n      () => triggerRef.current,\n      \"touchstart\",\n      () => {\n        if (isOpen) closeWithDelay()\n        else openWithDelay()\n      },\n      { passive: true },\n    )\n\n    useOutsideClick({\n      ref: triggerRef,\n      handler: () => {\n        closeWithDelay()\n      },\n    })\n\n    useEffect(\n      () => () => {\n        clearTimeout(openTimeout.current)\n        clearTimeout(closeTimeout.current)\n      },\n      [],\n    )\n\n    const getTriggerProps: PropGetter = useCallback(\n      (props = {}, ref = null) => ({\n        ...props,\n        ref: mergeRefs(triggerRef, ref, referenceRef),\n        onPointerEnter: handlerAll(props.onPointerEnter, openWithDelay),\n        onClick: handlerAll(props.onClick, onClick),\n        onPointerDown: handlerAll(props.onPointerDown, onPointerDown),\n        onFocus: handlerAll(props.onFocus, openWithDelay),\n        onBlur: handlerAll(props.onBlur, closeWithDelay),\n      }),\n\n      [referenceRef, onClick, onPointerDown, openWithDelay, closeWithDelay],\n    )\n\n    const child = Children.only(children) as React.ReactElement & {\n      ref?: React.Ref<any>\n    }\n    const trigger = cloneElement(child, getTriggerProps(child.props, child.ref))\n\n    const css: CSSUIObject = {\n      position: \"relative\",\n      ...styles,\n    }\n\n    if (!label) return <>{children}</>\n\n    const resolvedZIndex = (zIndexProp ??\n      zProp ??\n      zIndex ??\n      z) as CSSUIProps[\"zIndex\"]\n\n    return (\n      <>\n        {trigger}\n\n        <AnimatePresence>\n          {isOpen ? (\n            <Portal isDisabled={!withPortal} {...portalProps}>\n              <ui.div\n                {...getPopperProps()}\n                zIndex={resolvedZIndex}\n                pointerEvents=\"none\"\n              >\n                <ui.div\n                  as={motion.div}\n                  ref={ref}\n                  className={cx(\"ui-tooltip\", className)}\n                  style={{ transformOrigin }}\n                  {...(animation !== \"none\"\n                    ? getTooltipProps(animation, duration)\n                    : {})}\n                  initial=\"exit\"\n                  animate={isOpen ? \"enter\" : \"exit\"}\n                  exit=\"exit\"\n                  __css={css}\n                  {...rest}\n                >\n                  {label}\n                </ui.div>\n              </ui.div>\n            </Portal>\n          ) : null}\n        </AnimatePresence>\n      </>\n    )\n  },\n)\n"],"mappings":"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","names":["props","ref"]}