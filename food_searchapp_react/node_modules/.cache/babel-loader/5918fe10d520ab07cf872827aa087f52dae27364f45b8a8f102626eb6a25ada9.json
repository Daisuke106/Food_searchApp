{"ast":null,"code":"\"use client\";\n\n// src/index.ts\nimport { useSafeLayoutEffect, isRefObject, isArray } from \"@yamada-ui/utils\";\nimport { useState } from \"react\";\nvar trackElementSize = (el, cb) => {\n  var _a;\n  if (!el) {\n    cb(void 0);\n    return;\n  }\n  cb({\n    width: el.offsetWidth,\n    height: el.offsetHeight\n  });\n  const win = (_a = el.ownerDocument.defaultView) != null ? _a : window;\n  const observer = new win.ResizeObserver(entries => {\n    if (!isArray(entries) || !entries.length) return;\n    const [entry] = entries;\n    let width;\n    let height;\n    if (\"borderBoxSize\" in entry) {\n      const borderSizeEntry = entry.borderBoxSize;\n      const borderSize = isArray(borderSizeEntry) ? borderSizeEntry[0] : borderSizeEntry;\n      width = borderSize.inlineSize;\n      height = borderSize.blockSize;\n    } else {\n      width = el.offsetWidth;\n      height = el.offsetHeight;\n    }\n    cb({\n      width,\n      height\n    });\n  });\n  observer.observe(el, {\n    box: \"border-box\"\n  });\n  return () => observer.unobserve(el);\n};\nvar trackMutation = (el, cb) => {\n  var _a, _b;\n  if (!el || !el.parentElement) return;\n  const win = (_b = (_a = el.ownerDocument) == null ? void 0 : _a.defaultView) != null ? _b : window;\n  const observer = new win.MutationObserver(() => {\n    cb();\n  });\n  observer.observe(el.parentElement, {\n    childList: true\n  });\n  return () => {\n    observer.disconnect();\n  };\n};\nvar useSizes = _ref => {\n  let {\n    getNodes,\n    observeMutation = true\n  } = _ref;\n  const [sizes, setSizes] = useState([]);\n  const [count, setCount] = useState(0);\n  useSafeLayoutEffect(() => {\n    const elements = getNodes();\n    const cleanups = elements.map((element, index) => trackElementSize(element, size => {\n      setSizes(sizes2 => {\n        return [...sizes2.slice(0, index), size, ...sizes2.slice(index + 1)];\n      });\n    }));\n    if (observeMutation) {\n      const firstNode = elements[0];\n      cleanups.push(trackMutation(firstNode, () => {\n        setCount(count2 => count2 + 1);\n      }));\n    }\n    return () => {\n      cleanups.forEach(cleanup => {\n        cleanup == null ? void 0 : cleanup();\n      });\n    };\n  }, [count]);\n  return sizes;\n};\nvar useSize = refOrEl => {\n  const [size] = useSizes({\n    observeMutation: false,\n    getNodes: () => {\n      const node = isRefObject(refOrEl) ? refOrEl.current : refOrEl;\n      return [node];\n    }\n  });\n  return size;\n};\nexport { trackElementSize, useSize, useSizes };","map":{"version":3,"names":["useSafeLayoutEffect","isRefObject","isArray","useState","trackElementSize","el","cb","_a","width","offsetWidth","height","offsetHeight","win","ownerDocument","defaultView","window","observer","ResizeObserver","entries","length","entry","borderSizeEntry","borderBoxSize","borderSize","inlineSize","blockSize","observe","box","unobserve","trackMutation","_b","parentElement","MutationObserver","childList","disconnect","useSizes","_ref","getNodes","observeMutation","sizes","setSizes","count","setCount","elements","cleanups","map","element","index","size","sizes2","slice","firstNode","push","count2","forEach","cleanup","useSize","refOrEl","node","current"],"sources":["C:\\チーム開発\\Food_searchApp\\food_searchapp_react\\node_modules\\@yamada-ui\\use-size\\src\\index.ts"],"sourcesContent":["import { useSafeLayoutEffect, isRefObject, isArray } from \"@yamada-ui/utils\"\nimport { useState } from \"react\"\n\ntype Size = {\n  width: number\n  height: number\n}\n\nexport const trackElementSize = (\n  el: HTMLElement | null,\n  cb: (size: Size | undefined) => void,\n) => {\n  if (!el) {\n    cb(undefined)\n\n    return\n  }\n\n  cb({ width: el.offsetWidth, height: el.offsetHeight })\n\n  const win = el.ownerDocument.defaultView ?? window\n\n  const observer = new win.ResizeObserver((entries) => {\n    if (!isArray(entries) || !entries.length) return\n\n    const [entry] = entries\n    let width: number\n    let height: number\n\n    if (\"borderBoxSize\" in entry) {\n      const borderSizeEntry = entry.borderBoxSize\n      const borderSize = isArray(borderSizeEntry)\n        ? borderSizeEntry[0]\n        : borderSizeEntry\n\n      width = borderSize.inlineSize\n      height = borderSize.blockSize\n    } else {\n      width = el.offsetWidth\n      height = el.offsetHeight\n    }\n\n    cb({ width, height })\n  })\n\n  observer.observe(el, { box: \"border-box\" })\n\n  return () => observer.unobserve(el)\n}\n\nconst trackMutation = (el: HTMLElement | null, cb: () => void) => {\n  if (!el || !el.parentElement) return\n\n  const win = el.ownerDocument?.defaultView ?? window\n\n  const observer = new win.MutationObserver(() => {\n    cb()\n  })\n\n  observer.observe(el.parentElement, { childList: true })\n\n  return () => {\n    observer.disconnect()\n  }\n}\n\nexport const useSizes = <T extends HTMLElement | null>({\n  getNodes,\n  observeMutation = true,\n}: {\n  getNodes: () => T[]\n  observeMutation?: boolean\n}) => {\n  const [sizes, setSizes] = useState<Size[]>([])\n  const [count, setCount] = useState(0)\n\n  useSafeLayoutEffect(() => {\n    const elements = getNodes()\n\n    const cleanups = elements.map((element, index) =>\n      trackElementSize(element, (size) => {\n        setSizes((sizes) => {\n          return [\n            ...sizes.slice(0, index),\n            size,\n            ...sizes.slice(index + 1),\n          ] as Size[]\n        })\n      }),\n    )\n\n    if (observeMutation) {\n      const firstNode = elements[0]\n\n      cleanups.push(\n        trackMutation(firstNode, () => {\n          setCount((count) => count + 1)\n        }),\n      )\n    }\n\n    return () => {\n      cleanups.forEach((cleanup) => {\n        cleanup?.()\n      })\n    }\n  }, [count])\n\n  return sizes as (Size | undefined)[]\n}\n\nexport const useSize = <T extends HTMLElement | null>(\n  refOrEl: T | React.RefObject<T>,\n) => {\n  const [size] = useSizes({\n    observeMutation: false,\n\n    getNodes: () => {\n      const node = isRefObject(refOrEl) ? refOrEl.current : refOrEl\n\n      return [node]\n    },\n  })\n\n  return size as Size | undefined\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}